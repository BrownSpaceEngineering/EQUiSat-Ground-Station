#!/usr/bin/env bash

inpt="54686520717569636b2062726f776e20666f78206a756d706564206f76657220746865206c617a7920646f6720616e64207468657920686164206120676f6f642074696d6520746f67657468657220617320746865792072616e2061726f756e642063686173696e6720656163686f746865722e20576f77203235352062797465732069732061206c6f74206f6620636861726163746572732e2e2e2077652073757265206172652070757474696e672061206c6f74206f66206461746120696e2074686973207175616e746974792074686f7567682e20486f7adc138a23"
printf "input: \n%s\n" $inpt

encoded=$(./rsencode $inpt)
printf "encoded: \n%s\n" $encoded

encoded_distorted=${encoded/546865207175/123456789123}
#encoded_distorted=$encoded
# encoded_distorted="111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111"
printf "encoded_distorted: \n%s\n" $encoded_distorted

decoded=$(./rsdecode $encoded_distorted 32)
printf "decoded: \n%s\n" $decoded

echo
if [ $decoded == $inpt ]; then
    echo "SUCCESS"
else
    echo "!!! FAILURE (errors not corrected) !!!"
fi
